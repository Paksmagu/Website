!function(e){function webpackJsonpCallback(t){for(var n,i,o=t[0],s=t[1],u=t[2],c=0,d=[];c<o.length;c++)i=o[c],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(l&&l(t);d.length;)d.shift()();return r.push.apply(r,u||[]),checkDeferredModules()}function checkDeferredModules(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,o=1;o<n.length;o++){var l=n[o];0!==a[l]&&(i=!1)}i&&(r.splice(t--,1),e=__webpack_require__(__webpack_require__.s=n[0]))}return e}var t={},a={1:0},r=[];function __webpack_require__(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,a){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(__webpack_require__.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)__webpack_require__.d(a,r,function(t){return e[t]}.bind(null,r));return a},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="/anybird/static/build/";var n=window.webpackJsonp=window.webpackJsonp||[],i=n.push.bind(n);n.push=webpackJsonpCallback,n=n.slice();for(var o=0;o<n.length;o++)webpackJsonpCallback(n[o]);var l=i;r.push([444,0]),checkDeferredModules()}({219:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={LEARNING_OREILLY_HOST:"https://learning.oreilly.com",OREILLY_HOST:"www.oreilly.com"},e.exports=t.default},444:function(e,t,a){a(147),e.exports=a(445)},445:function(e,t,a){"use strict";a(446);var r=_interopRequireDefault(a(129)),n=a(463),i=_interopRequireDefault(a(218)),o=(a(219),_interopRequireDefault(a(540)));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var l=new i.default(window.location.search),s=document.getElementsByTagName("html")[0],u={env:s.getAttribute("data-env"),federatedAuthEnabled:s.getAttribute("data-federated-auth-enabled"),forceShow:window.location.href.search(/\?ar/)>=0||parseInt(s.getAttribute("data-force-show"),10)>0,readingUrl:l.get("next")||s.getAttribute("data-reading-url")||s.getAttribute("data-url"),signInUrl:"/accounts/login/?next="+(l.get("next")||s.getAttribute("data-url")),ssoMsgTimeoutMs:4e3},c=document.createElement("div");c.id="academic-modal",document.getElementsByTagName("body")[0].appendChild(c),(0,n.render)(r.default.createElement(o.default,u),c)},540:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function defineProperties(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,a){return t&&defineProperties(e.prototype,t),a&&defineProperties(e,a),e}}(),n=a(129),i=_interopRequireDefault(n),o=_interopRequireDefault(a(220)),l=_interopRequireDefault(a(218)),s=_interopRequireDefault(a(542)),u=a(219);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function StudentIntercept(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,StudentIntercept);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(StudentIntercept.__proto__||Object.getPrototypeOf(StudentIntercept)).call(this,e)),a=new l.default(window.location.search);return t.state={show:!1,universityLogo:"",uiState:e.federatedAuthEnabled?"federated":"capture",email:a.get("email")||"",timestamp:a.get("tstamp")||"",signature:a.get("id")||"",error:"",federatedInstitution:"",mlfaIDPProviders:""},t.get(t.modifyPathIfHostNameMatches("/api/v1/account-summary-by-network/")).then(function(a){a.sso_login_url&&setTimeout(function(){t.redirectToSsoLoginUrl(a.sso_login_url)},e.ssoMsgTimeoutMs);var r=t.state.uiState;if(a.headers){var n=a.headers.get("X-EZP-User")||"";n&&(t.state.email=n)}t.state.email&&t.state.timestamp&&t.state.signature?(r="ezproxy-sso",t.registerUser()):a.sso_login_url&&(r="sso");var i={show:!0,universityLogo:a.logo,uiState:r};t.setState(i)}).catch(function(){t.props.forceShow&&t.setState({show:!0})}),t.determineSsoStatus=t.determineSsoStatus.bind(t),t.handleFederatedSelectionChange=t.handleFederatedSelectionChange.bind(t),t.handleInputChange=t.handleInputChange.bind(t),t.registerUser=t.registerUser.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(StudentIntercept,n.Component),r(StudentIntercept,[{key:"componentDidMount",value:function(){var e=this;if("federated"===this.state.uiState){var t=function(e){switch(e){case"production":return"com";case"qa":return"review";default:return"local"}}(this.props.env);this.setState({tld:t}),this.get("/library/view/api/mlfa-idp-list/").then(function(t){var a=JSON.parse(t);e.setState({mlfaIDPProviders:a}),e.setState({uiState:"federated"})}).catch(function(t){e.setState({uiState:"capture"})})}}},{key:"handleInputChange",value:function(e){this.setState({email:e.target.value})}},{key:"handleFederatedSelectionChange",value:function(e){if("other"===e.target.value)this.setState({uiState:"capture"});else{var t=this.getNextURLValue(),a=e.target.value;this.setState({federatedInstitution:a});var r="https://learning.oreilly."+this.state.tld+"/accounts/login-academic-check/?next="+t+"&idp-slug="+a;this.setState({targetUrl:r})}}},{key:"returnWindowPathName",value:function(){return window.location.pathname}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return fetch(e,{method:"GET",credentials:"same-origin"}).then(function(e){if(!e.ok){var a=new Error(e.statusText);throw a.response=e,a}return t?e.text():e.json()})}},{key:"post",value:function(e,t,a){return fetch(e,{method:"POST",body:JSON.stringify(t),credentials:a}).then(function(e){if(!e.ok){if(422===e.status)return e.json().then(function(e){var t=new Error;throw t.response=e,t});throw new Error(e.statusText)}return e.json()})}},{key:"redirectToSsoLoginUrl",value:function(e){window.location.replace(e+"&state="+encodeURIComponent(this.props.readingUrl))}},{key:"modifyPathIfHostNameMatches",value:function(e){return"www.oreilly.com"===window.location.hostname?""+u.LEARNING_OREILLY_HOST+e:"www.oreilly.review"===window.location.hostname?"https://learning.oreilly.review"+e:e}},{key:"getCredentials",value:function(){return"www.oreilly.com"===window.location.hostname||"www.oreilly.review"===window.location.hostname?"include":"same-origin"}},{key:"getNextURLValue",value:function(){var e=window.location.pathname;return e.includes("temporary-access")?"/home/":e}},{key:"determineSsoStatus",value:function(){var e=this,t=this.state.email.split("@");if(2===t.length)return this.get(this.modifyPathIfHostNameMatches("/api/v1/sso/account/lookup?domain="+t[1])).then(function(t){e.setState({uiState:"loading"}),e.redirectToSsoLoginUrl(t.sso_login_url)}).catch(function(t){e.registerUser()});this.registerUser()}},{key:"registerUser",value:function(){var e=this,t=this.state,a={email:t.email,timestamp:t.timestamp,signature:t.signature};this.props.forceShow&&(a.ar=!0),this.setState({uiState:"loading"}),this.post(this.modifyPathIfHostNameMatches("/api/v1/user/pq-student/"),a,this.getCredentials()).then(function(){e.setState({uiState:"success"})}).catch(function(t){if(t.response){var a=t.response.email||t.response.non_field_errors||"";e.setState({error:a,uiState:"capture"})}else e.setState({error:"",uiState:"failure"})})}},{key:"renderEmailEntry",value:function(){var e=this.state,t=e.universityLogo,a=e.email,r=e.uiState,n=e.error;e.csrfToken;return i.default.createElement(s.default,{universityLogo:t},i.default.createElement("div",{className:"attention"},i.default.createElement("p",null,"Welcome! Get instant access through ",i.default.createElement("span",{className:"nowrap"},"your library."))),i.default.createElement("div",{className:"messaging"},i.default.createElement("p",null,"Just enter your academic institution email below:"),i.default.createElement("div",{className:"input-container"+(n?" error":"")},i.default.createElement("input",{type:"text",name:"email",placeholder:"Academic email",value:a,onChange:this.handleInputChange,ref:function(e){return e&&e.focus()}})),n?i.default.createElement("small",{className:"error"},n):"",i.default.createElement("p",null,i.default.createElement("a",{href:this.modifyPathIfHostNameMatches(this.props.signInUrl)},"Already a user? Click here.")),i.default.createElement("p",null,"We will use your personal data in accordance with our ",i.default.createElement("a",{href:"https://www.oreilly.com/privacy.html"},"Privacy Policy"),".")),i.default.createElement("div",{className:"buttonBox"},"loading"===r?i.default.createElement("img",{className:"spinner",src:"/library/view/static/images/loading.gif",alt:""}):i.default.createElement("button",{className:"cta",onClick:this.determineSsoStatus},"Let's Go")))}},{key:"renderFederated",value:function(){this.props.env;var e=this.state,t=e.federatedInstitution,a=e.universityLogo,r=e.targetUrl,n=e.mlfaIDPProviders;return i.default.createElement(s.default,{universityLogo:a},i.default.createElement("div",{className:"attention"},i.default.createElement("p",null,"Welcome! Get instant access through ",i.default.createElement("span",{className:"nowrap"},"your library."))),i.default.createElement("div",{className:"messaging federatedMessage"},i.default.createElement("select",{className:"styled",onChange:this.handleFederatedSelectionChange,defaultValue:""},i.default.createElement("option",{key:"",value:"",disabled:!0,hidden:!0},"Select your institution"),Object.keys(n).map(function(e){return i.default.createElement("option",{key:e,"data-key":e,value:n[e].slug},n[e].name)})),i.default.createElement("div",{className:t?"":"hidden"},i.default.createElement("p",null,"Your institution is set up for seamless Federated access:"),i.default.createElement("div",{id:"federatedLoginButtonInternal"},i.default.createElement("a",{className:"shibboleth",href:r},"Sign In with my Institution"))),i.default.createElement("p",null,"We will use your personal data in accordance with our ",i.default.createElement("a",{href:"https://www.oreilly.com/privacy.html"},"Privacy Policy"),".")))}},{key:"renderSuccessMessage",value:function(){var e=this.state.universityLogo;return i.default.createElement(s.default,{className:"successModal",universityLogo:e},i.default.createElement("div",{className:"attention"},i.default.createElement("p",null,"Welcome to the O'Reilly Learning Platform!")),i.default.createElement("div",{className:"messaging centered"},i.default.createElement("p",null,"Your institution provides you free access to our 35K+ books, 30K+ hours of video, curated learning paths, case studies, interactive tutorials, audio books, and O'Reilly conference videos!")),i.default.createElement("div",{className:"buttonBox"},i.default.createElement("a",{className:"cta",href:this.modifyPathIfHostNameMatches(this.props.readingUrl)},"Got It")))}},{key:"renderFailureMessage",value:function(){var e=this.state.universityLogo;return i.default.createElement(s.default,{universityLogo:e},i.default.createElement("div",{className:"attention centered error"},i.default.createElement("div",null,i.default.createElement("img",{className:"error-alert",src:"/library/view/static/images/icons/exclamation-alert.svg",alt:"Alert"})),i.default.createElement("p",null,"An error has occurred with the site.")),i.default.createElement("div",{className:"messaging centered error"},i.default.createElement("p",null,"Please go back and re-enter your email address.")),i.default.createElement("div",{className:"buttonBox"},i.default.createElement("button",{className:"cta",onClick:function(){return window.location.reload(!0)}},"Try Again")))}},{key:"renderSsoMessage",value:function(){var e=this.state.universityLogo;return i.default.createElement(s.default,{className:"ssoModal",universityLogo:e},i.default.createElement("div",{className:"attention centered"},i.default.createElement("p",null,"Welcome to the O'Reilly Learning Platform!")),i.default.createElement("div",{className:"messaging centered"},i.default.createElement("p",null,"You have a free Safari account, courtesy of this library. Please wait while we connect.")))}},{key:"render",value:function(){var e=this.state,t=e.show,a=e.uiState;return t?"ezproxy-sso"==a?this.renderSsoMessage():"success"===a?this.renderSuccessMessage():"failure"===a?this.renderFailureMessage():"sso"==a?this.renderSsoMessage():"federated"==a?this.renderFederated(!1):this.renderEmailEntry():null}}]),StudentIntercept}();c.propTypes={readingUrl:o.default.string.isRequired,signInUrl:o.default.string.isRequired,forceShow:o.default.bool.isRequired,ssoMsgTimeoutMs:o.default.number.isRequired},t.default=c,e.exports=t.default},542:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=_interopRequireDefault(a(129)),n=_interopRequireDefault(a(220));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var i=function(e){var t=e.children,a=e.universityLogo;return r.default.createElement("div",{className:"backdrop"},r.default.createElement("div",{className:"modal "+e.className},r.default.createElement("div",{className:"header"},a?r.default.createElement("img",{className:"uni-logo",src:a,alt:"University logo"}):"",r.default.createElement("img",{className:"brand-logo",src:"https://cdn.oreillystatic.com/images/sitewide-headers/oreilly_logo_mark_red.svg",alt:"Oâ€™Reilly"})),r.default.createElement("div",{className:"content"},t)))};i.propTypes={children:n.default.oneOfType([n.default.arrayOf(n.default.node),n.default.node]),className:n.default.string,universityLogo:n.default.string},t.default=i,e.exports=t.default}});;